{
"version":3,
"file":"basics.js",
"sourceRoot":"file://",
"sources":["/haxe/haxe-pixi/samples/Application.hx","/haxe/haxe-pixi/samples/basics/Main.hx"],
"sourcesContent":["/* Helper class that can be used by any pixi application\n *\n * @author Adi Reddy Mora\n * http://adireddy.github.io\n * @license MIT\n * @copyright 2015\n */\n\npackage samples;\n\nimport pixi.core.display.DisplayObject;\nimport pixi.plugins.stats.Stats;\nimport pixi.core.renderers.Detector;\nimport pixi.core.display.Container;\nimport js.html.Event;\nimport js.html.CanvasElement;\nimport js.Browser;\n\nclass Application {\n\n\t/*\n\t * Sets the pixel ratio of the application\n\t * @default 1\n\t */\n\tpublic var pixelRatio(null, default):Float;\n\n\t/*\n\t * Default frame rate is 60 FPS and this can be set to true to get 30 FPS\n\t * @default false\n\t */\n\tpublic var skipFrame(null, default):Bool;\n\n\t/*\n\t * Width of the application\n\t * @default Browser.window.innerWidth\n\t */\n\tpublic var width(null, default):Float;\n\n\t/*\n\t * Height of the application\n\t * @default Browser.window.innerHeight\n\t */\n\tpublic var height(null, default):Float;\n\n\t/*\n\t * Whether you want to resize the canvas and renderer on browser resize\n\t * Should be set to false when custom width and height are used for the application\n\t * @default true\n\t */\n\tpublic var resize(null, default):Bool;\n\n\t/*\n\t * Enable/disable stats for the application\n\t * Note that stats.js is not part of pixi so don't forget to include it you html page\n\t * Can be found in libs folder - <script type=\"text/javascript\" src=\"libs/stats.min.js\"></script>\n\t * @default false\n\t */\n\tpublic var stats(null, set):Bool;\n\n\t/*\n\t * Sets the background color of the stage\n\t * @default 0xFFFFFF\n\t */\n\tpublic var backgroundColor(null, default):Int;\n\n\t/*\n\t * Update listener function\n\t */\n\tpublic var onUpdate:Float -> Void;\n\n\t/*\n\t * Windo resize listener function\n\t */\n\tpublic var onResize:Void -> Void;\n\n\t/*\n\t * Pixi stage\n\t * Read-only\n\t */\n\tvar _stage(default, null):DisplayObject;\n\n\tvar _canvas:CanvasElement;\n\tvar _renderer:Dynamic;\n\tvar _stats:Stats;\n\n\tvar _lastTime:Date;\n\tvar _currentTime:Date;\n\tvar _elapsedTime:Float;\n\tvar _skipFrame:Bool;\n\n\tpublic function new() {\n\t\t_lastTime = Date.now();\n\t\t_setDefaultValues();\n\t}\n\n\tfunction _setDefaultValues() {\n\t\tpixelRatio = 1;\n\t\tskipFrame = false;\n\t\tstats = false;\n\t\tbackgroundColor = 0xFFFFFF;\n\t\twidth = Browser.window.innerWidth;\n\t\theight = Browser.window.innerHeight;\n\t\t_skipFrame = false;\n\t}\n\n\tpublic function start() {\n\t\t_canvas = Browser.document.createCanvasElement();\n\t\t_canvas.style.width = width + \"px\";\n\t\t_canvas.style.height = height + \"px\";\n\t\t_canvas.style.position = \"absolute\";\n\t\tBrowser.document.body.appendChild(_canvas);\n\n\t\t//trace(untyped __js__(\"PIXI\"));\n\t\ttrace(untyped __js__(\"PIXI.Stage\"));\n\n\t\t/*_stage = new DisplayObject();\n\n\t\tvar renderingOptions:RenderingOptions = {};\n\t\trenderingOptions.view = _canvas;\n\t\trenderingOptions.resolution = pixelRatio;\n\n\t\t_renderer = Detector.autoDetectRenderer(width, height, renderingOptions);\n\n\t\ttrace(\"DDD\", _renderer);\n\t\tBrowser.document.body.appendChild(_renderer.view);\n\t\tBrowser.window.onresize = _onWindowResize;\n\t\tBrowser.window.requestAnimationFrame(cast _onRequestAnimationFrame);\n\t\t_lastTime = Date.now();*/\n\t}\n\n\tfunction _onWindowResize(event:Event) {\n\t\twidth = Browser.window.innerWidth;\n\t\theight = Browser.window.innerHeight;\n\t\t_renderer.resize(width, height);\n\t\t_canvas.style.width = width + \"px\";\n\t\t_canvas.style.height = height + \"px\";\n\t\tif (onResize != null) onResize();\n\t}\n\n\tfunction _onRequestAnimationFrame() {\n\t\tif (skipFrame && _skipFrame) _skipFrame = false;\n\t\telse {\n\t\t\t_skipFrame = true;\n\t\t\t_calculateElapsedTime();\n\t\t\tif (onUpdate != null) onUpdate(_elapsedTime);\n\t\t\t_renderer.render(_stage);\n\t\t}\n\t\tBrowser.window.requestAnimationFrame(cast _onRequestAnimationFrame);\n\t\tif (_stats != null) _stats.update();\n\t}\n\n\tfunction _calculateElapsedTime() {\n\t\t_currentTime = Date.now();\n\t\t_elapsedTime = _currentTime.getTime() - _lastTime.getTime();\n\t\t_lastTime = _currentTime;\n\t}\n\n\tfunction set_stats(val:Bool):Bool {\n\t\tif (val) {\n\t\t\tvar _container = Browser.document.createElement(\"div\");\n\t\t\tBrowser.document.body.appendChild(_container);\n\t\t\t_stats = new Stats();\n\t\t\t_stats.domElement.style.position = \"absolute\";\n\t\t\t_stats.domElement.style.top = \"2px\";\n\t\t\t_stats.domElement.style.right = \"2px\";\n\t\t\t_container.appendChild(_stats.domElement);\n\t\t\t_stats.begin();\n\t\t}\n\t\treturn stats = val;\n\t}\n}","package samples.basics;\n\nclass Main extends Application {\n\n\t//var _bunny:Sprite;\n\n\tpublic function new() {\n\t\tsuper();\n\t\t_init();\n\n\t\t/*_bunny = new Sprite(Texture.fromImage(\"assets/basics/bunny.png\"));\n\t\t_bunny.anchor.set(0.5, 0.5);\n\t\t_bunny.scale.set(2, 2);\n\t\t_bunny.position.set(400, 300);\n\t\t_stage.addChild(_bunny);*/\n\t}\n\n\tfunction _init() {\n\t\tstats = true;\n\t\tbackgroundColor = 0x003366;\n\t\tonUpdate = _onUpdate;\n\t\tresize = false;\n\t\twidth = 800;\n\t\theight = 600;\n\t\tsuper.start();\n\t}\n\n\tfunction _onUpdate(elapsedTime:Float) {\n\t\t//_bunny.rotation += 0.1;\n\t}\n\n\tstatic function main() {\n\t\tnew Main();\n\t}\n}"],
"names":[],
"mappings":";;;;;;;;sBA0FO,XAAe;CACrB,EAAY;CACZ;;;mBAGD,RAA6B;EAC5B,CAAa;EACb,CAAY;EACZ,DAAQ;EACR,CAAkB;EAClB,CAAQ;EACR,CAAS;EACT,CAAa;;OAGP,IAAiB;EACb;EAAV,CAAU;EACV,CAAsB,AAAQ;EAC9B,CAAuB,AAAS;EAChC,CAAyB;EACzB,DAAkC;EAGlC,UAAc;;WA4Cf,GAAkC;EACjC,AAAI,DAAK;GACS,FAA+B;GAChD,FAAkC;GAClC,AAAS;GACT,AAAmC;GACnC,AAA8B;GAC9B,AAAgC;GAChC,FAAuB;GACvB;;EAEM,CAAQ;;;;sBClKT,XAAe;CACrB;CACA;;2BAuBM,hBACN;;;;;OAfD,IAAiB;EAChB,DAAQ;EACR,CAAkB;EAClB,CAAW;EACX,CAAS;EACT,CAAQ;EACR,CAAS;EACT;;WAGD,WAAsC;;;;;;;;"
}